/* Mite.js v1.0.0 | MIT License | https://github.com/n2geoff/mite */
var C=(B,z,...q)=>{if(typeof B==="function")return B({...z,children:q.flat(1/0)});let J=z&&typeof z==="object"&&!z.flat&&!z.tag;return{tag:B||"fragment",props:J?z:{},children:(J?q:[z,...q]).flat(1/0).filter((H)=>H!=null&&H!==!1&&H!=="")}},Y=(B,z=!1)=>{if(typeof B!=="object")return document.createTextNode(B);if(B.tag==="fragment"){let H=document.createDocumentFragment();return B.children.forEach((K)=>H.appendChild(Y(K,z))),H}let q=z||B.tag==="svg",J=q?document.createElementNS("http://www.w3.org/2000/svg",B.tag):document.createElement(B.tag);if(D(J,B.props),B.children.forEach((H)=>J.appendChild(Y(H,q))),B.props?.oncreate)setTimeout(()=>B.props.oncreate(J));return J},D=(B,z={},q={})=>{let J={...q,...z};for(let H in J)if(z[H]!==q[H])T(B,H,z[H],q[H])},T=(B,z,q,J)=>{if(z.startsWith("on")){let H=z.slice(2).toLowerCase();if(J)B.removeEventListener(H,J);if(q)B.addEventListener(H,q)}else if(z==="style"){if(typeof q==="string")B.style.cssText=q;else if(B.style.cssText="",q)Object.assign(B.style,q)}else if(z in B&&z!=="list"&&z!=="form")B[z]=q==null?"":q;else if(q==null||q===!1)B.removeAttribute(z);else B.setAttribute(z,q===!0?"":q)},I=(B,z,q,J=0)=>{let H=B.childNodes[J];if(z==null)return H&&B.removeChild(H);if(!H)return B.appendChild(Y(z));let K=typeof z==="object";if(K!==(typeof q==="object")||K&&(z?.tag!==q?.tag||z.props?.key!==q.props?.key))return B.replaceChild(Y(z),H);if(K){D(H,z.props,q.props);let Q=z.children,U=q.children,W=Math.max(Q.length,U.length),X=z.tag==="fragment"?B:H;for(let L=0;L<W;L++)I(X,Q[L],U[L],L>=Q.length?Q.length:L)}else if(H.nodeValue!==z)H.nodeValue=z},E=(B,z=!1)=>{let q={...B},J=[];return{getState:()=>q,update:(H)=>{if(q={...q,...H},z)console.log("State Update:",q);J.forEach((K)=>K(q))},subscribe:(H)=>J.push(H)}},O=(B,{view:z,routes:q,state:J={}})=>{let H=document.querySelector(B),K=J?.subscribe?J:E(J||{}),_=null,Q=()=>{let U={state:K.getState(),update:K.update,params:{},content:null};if(q){let X=window.location.hash;if(X&&!X.startsWith("#/"))return;let L=X.slice(1)||"/",$=q[L];if(!$){for(let Z in q)if(Z.includes(":")){let G=new RegExp(`^${Z.replace(/:[^\s/]+/g,"([^/]+)")}$`),A=L.match(G);if(A){$=q[Z];let F=Z.match(/:[^\s/]+/g);if(F)F.forEach((M,j)=>U.params[M.substring(1)]=A[j+1]);break}}}let R=$||q["404"];if(R)U.content=R(U)}let W=z?z(U):U.content;if(W)I(H,W,_,0),_=W};if(K.subscribe(Q),q)window.addEventListener("hashchange",Q);return Q(),K};export{E as signal,D as patchProps,T as patchProp,I as patch,O as mount,C as h,Y as createElement};
