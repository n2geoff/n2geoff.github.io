/* Mite.js v1.0.0 | MIT License | https://github.com/n2geoff/mite */
var b=(j,z={},...B)=>({tag:j||"fragment",props:z||{},children:B.flat().filter((F)=>F!==null&&F!==void 0&&F!==!1)}),G=(j,...z)=>{let B=j.reduce((I,J,Q)=>{let K=z[Q],U="";if(K!==void 0&&K!==null)if(Array.isArray(K))U=`__ARR_${Q}__`;else if(typeof K==="object"||typeof K==="function")U=`__VAL_${Q}__`;else U=K;return I+J+U},""),F=document.createElement("template");F.innerHTML=B.trim();let q=F.content,D=(I)=>{if(I.nodeType===3){let J=I.textContent,Q=J.match(/__ARR_(\d+)__/);if(Q)return z[parseInt(Q[1])];let K=J.match(/__VAL_(\d+)__/);if(K)return z[parseInt(K[1])];return J}if(I.nodeType===1){let J={},Q=I.tagName.toLowerCase();Array.from(I.attributes).forEach((U)=>{let{name:X,value:Z}=U,$=Z.match(/__VAL_(\d+)__/);if($)Z=z[parseInt($[1])];J[X==="class"?"class":X]=Z});let K=Array.from(I.childNodes).map(D).flat().filter((U)=>U!==null);return b(Q,J,...K)}return null};return q.childNodes.length===1?D(q.firstChild):b("fragment",{},...Array.from(q.childNodes).map(D).flat())},R=(j,z,B={})=>{if(!j||j.nodeType!==1)return;let F={...B,...z};for(let q in F){let D=z[q],I=B[q];if(D===I||q==="key"||q==="oncreate")continue;if(q.startsWith("on")){let J=q.substring(2).toLowerCase();if(I)j.removeEventListener(J,I);if(D)j.addEventListener(J,D)}else if(q==="style"&&typeof D==="object")Object.assign(j.style,D);else if(q==="value"||q==="checked"||q==="selected")j[q]=D;else{let J=q==="className"?"class":q;if(D===!1||D==null)j.removeAttribute(J);else j.setAttribute(J,D===!0?"":D)}}},_=(j,z=!1)=>{if(typeof j==="string"||typeof j==="number")return document.createTextNode(j);if(j.tag==="fragment"){let q=document.createDocumentFragment();return j.children.forEach((D)=>q.appendChild(_(D,z))),q}let B=z||j.tag==="svg",F=B?document.createElementNS("http://www.w3.org/2000/svg",j.tag):document.createElement(j.tag);if(R(F,j.props),j.children.forEach((q)=>F.appendChild(_(q,B))),j.props?.oncreate)setTimeout(()=>j.props.oncreate(F),0);return F},H=(j,z,B,F=0)=>{if(!j)return;let q=j.childNodes[F];if(z===void 0){if(q)j.removeChild(q);return}if(!q){j.appendChild(_(z));return}let D=typeof z==="string"||typeof z==="number",I=typeof B==="string"||typeof B==="number";if(D||I){if(z!==B)if(D&&I&&q.nodeType===3)q.nodeValue=z;else j.replaceChild(_(z),q);return}if(z.tag!==B?.tag||z.props?.key!==B?.props?.key){j.replaceChild(_(z),q);return}if(z.tag){if(z.tag!=="fragment")R(q,z.props,B?.props||{});let J=z.children||[],Q=B?.children||[],K=Math.max(J.length,Q.length),U=z.tag==="fragment"?j:q;for(let X=0;X<K;X++)H(U,J[X],Q[X],X)}},A=(j,z=!1)=>{let B={...j},F=[];return{getState:()=>B,update:(q)=>{if(B={...B,...q},z)console.log("State Update:",B);F.forEach((D)=>D(B))},subscribe:(q)=>F.push(q)}},Y=(j)=>j?.subscribe?j:A(j||{}),E=(j,z,B={})=>{let F=document.querySelector(j),q=Y(B),D=null,I=()=>{let J=z(q.getState(),q.update);H(F,J,D,0),D=J};return q.subscribe(I),I(),q},T=(j)=>{window.location.hash=j.startsWith("/")?j:`/${j}`},M=(j,...z)=>{let{href:B,...F}=j,q=window.location.hash.slice(1)||"/",D=B.startsWith("#")?B.slice(1):B,I=q===D;return b("a",{...F,href:`#${D}`,class:`${j.class||""} ${I?"active":""}`.trim()},...z)},S=(j,z,B={})=>{let F=document.querySelector(j);F.innerHTML="";let q=Y(B),D=null,I=()=>{let J=window.location.hash;if(J&&!J?.startsWith("#/"))return;let Q=window.location.hash.slice(1)||"/",K=z[Q],U={};if(!K){for(let Z in z)if(Z.includes(":")){let $=new RegExp(`^${Z.replace(/:[^\s/]+/g,"([^/]+)")}$`),L=Q.match($);if(L){K=z[Z],Z.match(/:[^\s/]+/g).forEach((O,W)=>U[O.substring(1)]=L[W+1]);break}}}let X=K||z["404"];if(X){let Z=X(q.getState(),q.update,U);H(F,Z,D,0),D=Z}};return q.subscribe(I),window.addEventListener("hashchange",I),I(),q};export{A as store,S as route,R as patchProps,H as patch,T as navigate,E as mount,Y as isStore,G as html,b as h,_ as createElement,M as Link};
